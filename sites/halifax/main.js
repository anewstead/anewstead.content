function _id(a){var b=a;return"#"==a.charAt(0)&&(b=a.substring(1)),document.getElementById(b)}function loadImageObjectArray(a,b){var c=a,d=c.length;if(d<1)return console.log("loadImageObjectArray: no images to load"),void(b&&b());for(var e=0,f=0;f<d;f++){var g=c[f].url,h=c[f].toID;"#"==h.charAt(0)&&(h=c[f].toID.substring(1));var i=c[f].classes,j=function(){++e===d&&b&&b()},k=new Image;k.onload=function(){this.parentElement.style.width=this.getBoundingClientRect().width+"px",this.parentElement.style.height=this.getBoundingClientRect().height+"px",j()},k.onerror=function(){console.log("loadImageObjectArray: File not found: "+this.src),j()},i&&""!=i&&k.setAttribute("class",i),h&&""!=h&&(document.getElementById(h)?document.getElementById(h).appendChild(k):console.log("loadImageObjectArray: container element not found: #"+h)),k.setAttribute("src",g)}}function init(){loadImageObjectArray(imageObjectsToLoad,setup)}function setup(){addXMasks(),addHalifaxLogos(),addIntroSeq(),addEndSeq(),addListeners(),initAnimation(),_id("#loading_state").style.display="none",_id("#main_content").style.visibility="visible",setTimeout(startAnimation,333)}function addXMasks(){for(var a=document.querySelectorAll("div.xmask"),b=a.length,c=0;c<b;c++)a[c].innerHTML="<div>"+xmask_SVG+"</div>"}function addHalifaxLogos(){for(var a=document.querySelectorAll("div.halifax_logo"),b=a.length,c=0;c<b;c++)a[c].innerHTML=halifax_logo_SVG}function addIntroSeq(){_id("#intro_sprite").setAttribute("style",introSpriteContainerCSS),introSpriteTL=new TimelineMax({paused:!0});var a=Math.round(1/introSprite.framesPerSecond*100)/100;introSprite.frames.forEach(function(b,c){var d=-introSprite.framePadding,e=-((2*b+1)*introSprite.framePadding+b*introSprite.frameHeight);0==c&&introSpriteTL.add(TweenMax.set("#intro_sprite img",{x:d,y:e})),introSpriteTL.add(TweenMax.set("#intro_sprite img",{x:d,y:e,delay:a}))})}function addEndSeq(){_id("#end_sprite").setAttribute("style",endSpriteContainerCSS),endSpriteTL=new TimelineMax({paused:!0});var a=Math.round(1/endSprite.framesPerSecond*100)/100;endSprite.frames.forEach(function(b,c){var d=-endSprite.framePadding,e=-((2*b+1)*endSprite.framePadding+b*endSprite.frameHeight);0==c&&introSpriteTL.add(TweenMax.set("#end_sprite img",{x:d,y:e})),endSpriteTL.add(TweenMax.set("#end_sprite img",{x:d,y:e,delay:a}))})}function addListeners(){_id("#default_exit").addEventListener("click",default_click,!1)}function default_click(a){console.log("clickTag: "+clickTag),window.open(clickTag,"_blank")}function startAnimation(){startTime=new Date,showf1()}function endAnimation(){var a=new Date;console.log("Animation duration: "+(a-startTime)/1e3+" seconds")}function initAnimation(){TweenMax.defaultEase=Power1.easeInOut;var a=["#intro_text1","#intro_text2","#f2_text1","#f2_text2","#f3_text1","#f3_text2","#end_text1","#end_cta","#halifax_logo2","#end_bg","#legal_text2"];TweenMax.set(a,{autoAlpha:0}),TweenMax.set(["#intro_text1","#intro_text2"],{scale:0});var b=["#intro_text1","#intro_text2","#halifax_logo1","#halifax_logo2","#xmask1","#xmask2","#xmask3","#xmask4","#xmask_end"];TweenMax.set(b,{force3D:!1}),TweenMax.set("#xmask_end",{autoAlpha:0})}function showArrow(a,b){b||(b=function(){});var c=new TimelineMax({});c.add(TweenMax.to(a,.5,{y:140,ease:Power2.easeOut})),c.add(TweenMax.to(a,.2,{y:"-=10",ease:Power2.easeOut})),c.add(TweenMax.to(a,.2,{y:"+=10",ease:Power2.easeOut,onComplete:b}))}function swipeArrow(a,b){b||(b=function(){});var c=new TimelineMax({});c.add(TweenMax.to(a,.2,{y:"-=20",ease:Power1.easeIn})),c.add(TweenMax.to(a,.4,{delay:.1,y:500,ease:Power3.easeIn,onComplete:b}))}function zoomText(a,b){b||(b=function(){});var c=new TimelineMax({});c.add(TweenMax.to(a,.3,{autoAlpha:1,scale:1.06,ease:Power2.easeOut})),c.add(TweenMax.to(a,.1,{autoAlpha:1,scale:1,ease:Power2.easeIn,onComplete:b}))}function showf1(){showArrow("#xmask1"),TweenMax.delayedCall(.6,zoomText,["#intro_text1"]),TweenMax.delayedCall(.8,zoomText,["#intro_text2"]),TweenMax.delayedCall(1.1,playIntroSprite)}function playIntroSprite(){introSpriteTL.eventCallback("onComplete",showf1complete),introSpriteTL.play()}function showf1complete(){TweenMax.delayedCall(0,hidef1)}function hidef1(){swipeArrow("#xmask1",hidef1complete),TweenMax.to("#legal_text1",.2,{autoAlpha:0})}function hidef1complete(){showf2()}function showf2(){showArrow("#xmask2");var a=new TimelineMax({delay:.6});a.add(TweenMax.to("#f2_text1",.5,{autoAlpha:1})),a.add(TweenMax.to("#f2_text2",.5,{autoAlpha:1,onComplete:showf2complete}),"-=0.2")}function showf2complete(){TweenMax.delayedCall(5,hidef2)}function hidef2(){swipeArrow("#xmask2"),TweenMax.to("#xmask3",.8,{delay:.2,y:500,ease:Power3.easeIn,onComplete:hidef2complete})}function hidef2complete(){showf3()}function showf3(){showArrow("#xmask4");var a=new TimelineMax({delay:.6});a.add(TweenMax.to("#f3_text1",.5,{autoAlpha:1})),a.add(TweenMax.to("#f3_text2",.5,{autoAlpha:1,onComplete:showf3complete}),"-=0.2")}function showf3complete(){TweenMax.delayedCall(6,hidef3)}function hidef3(){TweenMax.to(["#xmask4","#f3_text1","#f3_text2","#halifax_logo1"],.5,{autoAlpha:0,onComplete:hidef3complete})}function hidef3complete(){showEnd()}function showEnd(){var a="#xmask_end div svg #svgPath",b="#xmask_end div",c=115,d=.15;TweenMax.set(["#xmask_end"],{autoAlpha:1}),TweenMax.set([a],{transformOrigin:"50% 50%"}),TweenMax.set(["#end_bg","#end_text1","#end_cta","#halifax_logo2"],{autoAlpha:1});var e=new TimelineMax({delay:.1});e.add(TweenMax.to(a,.5,{scale:c*(1+d),ease:Power1.easeIn})).add(TweenMax.to(b,.5,{x:"-31%",y:"-58%",ease:Power1.easeIn}),"-=0.5"),e.add(TweenMax.to(a,.2,{scale:c*(1-d),onComplete:playEndSprite})),e.add(TweenMax.to(a,.2,{scale:c})),e.add(TweenMax.to("#legal_text2",.2,{autoAlpha:1}),"-=0.5")}function playEndSprite(){endSpriteTL.eventCallback("onComplete",showEndcomplete),endSpriteTL.play()}function showEndcomplete(){endAnimation()}var xmask_SVG='<svg id="Layer_1" data-name="Layer 1" xmlns="www.w3.org/2000/svg" viewBox="0 0 48000 48000" preserveAspectRatio="xMinYMin slice"><title>x_cut</title><path id="svgPath" d="M24275-23800H-23725V24200H24275V-23800M328.551,328.4L275,283.3l-53.6,45.1H25L176.3,200,25,71.551H221.4L275,116.6l53.551-45.049H525L373.65,200l151.3,128.4h-196.4Z" transform="translate(23725 23800)" /></svg>',halifax_logo_SVG='<svg id="Layer_1" data-name="Layer 1" xmlns="www.w3.org/2000/svg" viewBox="0 0 488.133 249.892"><title>Halifax_Chevron_Only_Vector_Logo_Rev</title><polyline points="0 162.542 26.855 162.542 26.855 134.124 54.38 134.124 54.38 162.542 81.228 162.542 81.228 86.658 54.38 86.658 54.38 113.893 26.855 113.893 26.855 86.658 0 86.658 0 162.542" style="fill:#fff"/><polyline points="177.596 86.664 204.004 86.664 204.004 145.329 229.994 145.329 229.994 162.542 177.596 162.542 177.596 86.664" style="fill:#fff"/><rect x="234.224" y="86.664" width="26.738" height="75.878" style="fill:#fff"/><polyline points="271.284 86.664 324.375 86.664 324.375 102.549 297.682 102.549 297.682 116.481 324.184 116.481 324.184 132.774 297.682 132.774 297.682 162.542 271.284 162.542 271.284 86.664" style="fill:#fff"/><polyline points="486.693 249.562 295.321 249.562 287.75 242.783 479.121 242.783 486.693 249.562" style="fill:#fff"/><polyline points="470.746 236.004 279.38 236.004 271.809 229.23 463.175 229.23 470.746 236.004" style="fill:#fff"/><polyline points="454.532 222.98 263.166 222.98 255.583 216.201 446.96 216.201 454.532 222.98" style="fill:#fff"/><polyline points="436.726 208.625 245.355 208.625 237.783 201.851 429.155 201.851 436.726 208.625" style="fill:#fff"/><polyline points="420.25 194.541 228.879 194.541 221.307 187.768 412.679 187.768 420.25 194.541" style="fill:#fff"/><polyline points="403.773 180.988 212.401 180.988 204.824 174.209 396.196 174.209 403.773 180.988" style="fill:#fff"/><polyline points="231.205 208.697 54.586 208.697 62.291 201.918 223.634 201.918 231.205 208.697" style="fill:#fff"/><polyline points="214.723 194.608 70.795 194.608 78.506 187.829 207.151 187.829 214.723 194.608" style="fill:#fff"/><polyline points="198.246 181.05 87.143 181.05 94.854 174.276 190.675 174.276 198.246 181.05" style="fill:#fff"/><polyline points="227.746 223.048 36.508 223.048 44.219 216.274 234.525 216.274 227.746 223.048" style="fill:#fff"/><polyline points="211.269 236.339 20.037 236.339 27.742 229.564 218.049 229.564 211.269 236.339" style="fill:#fff"/><polyline points="195.316 249.892 4.079 249.892 11.79 243.112 202.096 243.112 195.316 249.892" style="fill:#fff"/><polyline points="10.333 7.114 201.705 7.114 194.123 0.329 2.756 0.329 10.333 7.114" style="fill:#fff"/><polyline points="26.275 20.667 217.646 20.667 210.075 13.888 18.703 13.888 26.275 20.667" style="fill:#fff"/><polyline points="42.489 33.69 233.867 33.69 226.289 26.911 34.918 26.911 42.489 33.69" style="fill:#fff"/><polyline points="60.3 48.041 251.672 48.041 244.089 41.268 52.723 41.268 60.3 48.041" style="fill:#fff"/><polyline points="76.776 62.13 268.148 62.13 260.576 55.356 69.205 55.356 76.776 62.13" style="fill:#fff"/><polyline points="93.259 75.683 284.619 75.683 277.042 68.909 85.682 68.909 93.259 75.683" style="fill:#fff"/><polyline points="265.821 47.98 427.152 47.98 434.863 41.201 258.244 41.201 265.821 47.98" style="fill:#fff"/><polyline points="282.299 62.063 410.943 62.063 418.654 55.284 274.726 55.284 282.299 62.063" style="fill:#fff"/><polyline points="298.786 75.622 394.601 75.622 402.306 68.842 291.209 68.842 298.786 75.622" style="fill:#fff"/><polyline points="254.925 33.623 445.23 33.623 452.941 26.85 261.704 26.85 254.925 33.623" style="fill:#fff"/><polyline points="271.406 20.338 461.707 20.338 469.424 13.559 278.175 13.559 271.406 20.338" style="fill:#fff"/><polyline points="287.353 6.779 477.665 6.779 485.365 0 294.127 0 287.353 6.779" style="fill:#fff"/><path d="M426.246,199.1l6.467-16.5,5.278,16.5H426.246M559.9,148.959H531.931l-16.962,19.177-15.847-19.177H467.664l29.784,38.02-23.881,29.957-28.629-67.977h-23.3l-34.984,75.878h27.7l5.4-11.433h24.5l5.178,11.433h47.623l14.992-18.7,14.842,18.7h32.652L529.8,187.174Z" transform="translate(-71.764 -62.295)" style="fill:#fff"/><path d="M194.745,199.1l6.467-16.5,5.278,16.5H194.745m18.692-50.145h-23.3l-34.979,75.878h27.7l5.4-11.433h24.5l5.167,11.433H245.4Z" transform="translate(-71.764 -62.295)" style="fill:#fff"/></svg>',startTime,introSpriteTL,endSpriteTL,introSprite={url:"topcatjump300x250croppedopt.png",toID:"#intro_sprite",classes:"",frameWidth:230,frameHeight:166,framePadding:5,framesPerSecond:12,frames:[0,1,2,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,6,7,8,9,10,11,0]},introSpriteContainerCSS="width:"+introSprite.frameWidth+"px;";introSpriteContainerCSS+="height:"+introSprite.frameHeight+"px;",introSpriteContainerCSS+="overflow:hidden; bottom:0px; left:10px;";var endSprite={url:"topcatpoint300x250croppedopt.png",toID:"#end_sprite",classes:"",frameWidth:145,frameHeight:184,framePadding:5,framesPerSecond:12,frames:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,18,19,20,21,22,17,17,17,17,17,17,17,17,18,19,20,21,22,17,17,17,17,17,17,17,17,17,17]},endSpriteContainerCSS="width:"+endSprite.frameWidth+"px;";endSpriteContainerCSS+="height:"+endSprite.frameHeight+"px;",endSpriteContainerCSS+="overflow:hidden; bottom:-5px; left:0px;";var introText1={url:"intro_text1.png",toID:"#intro_text1",classes:"retina"},introText2={url:"intro_text2.png",toID:"#intro_text2",classes:"retina"},f2Text1={url:"f2_text1.png",toID:"#f2_text1",classes:"retina"},f2Text2={url:"f2_text2.png",toID:"#f2_text2",classes:"retina"},f3Text1={url:"f3_text1.png",toID:"#f3_text1",classes:"retina"},f3Text2={url:"f3_text2.png",toID:"#f3_text2",classes:"retina"},endText1={url:"end_text1.png",toID:"#end_text1",classes:"retina"},endCTA={url:"end_cta.png",toID:"#end_cta",classes:"retina"},legalText1={url:"legals1.png",toID:"#legal_text1",classes:"retina"},legalText2={url:"legals2.png",toID:"#legal_text2",classes:"retina"},imageObjectsToLoad=[introSprite,endSprite,introText1,introText2,f2Text1,f2Text2,f3Text1,f3Text2,endText1,endCTA,legalText1,legalText2];